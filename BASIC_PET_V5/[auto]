.PAG 'TRACE-AUTO'
;
; AUTO LINE NUMBER
;
; SYNTAX
;
; AUTO INC# - ENABLE AUTO
; AUTO - DISABLE AUTO
;
AUTO	JSR LINGET      ;GET START #
	JSR PRTRTN      ;CHK SYNTAX
	LDA LINNUM      ;SAVE IT
	STA AUTINC
	LDA LINNUM+1
	STA AUTINC+1
	JMP NOTDEL      ;FINSH WITH READY
;
; INSERTS NEW LINES AND DOES AUTO
;
WNUMB	JSR LINGET      ;GET LINE # INTO LINNUM
	BEQ WNB900      ;LINE # ONLY
WNB400	LDA AUTINC      ;IN AUTO MODE ?
	ORA AUTINC+1
	BEQ WNB900      ;NO
WNB600	LDA LINNUM      ;CALC # FOR NEXT LINE
	CLC
	ADC AUTINC
	TAX             ;SET UP FOR PAFOT0
	LDA LINNUM+1
	ADC AUTINC+1
	JSR PAFOT0      ;OUTPUT NUMBER
	LDX #0          ;PUT ASCII IN KEYB BUFFER
WNB700	LDA FBUFFR,X
	BEQ WNB800      ;DONE
	STA KEYD,X
	INX
	BNE WNB700      ;ALWAYS
WNB800	LDA #$20        ;1 SPACE AFTER
	STA KEYD,X
	INX
	STX NDX         ;# CHAR PUT IN BUF
WNB900	RTS             ;SQUISH IT
.END
